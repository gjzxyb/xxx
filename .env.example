# ============================================
# 分科自选 SaaS 平台 - 环境变量配置示例
# ============================================
# 
# 使用说明:
# 1. 复制此文件为 .env
# 2. 根据实际情况修改配置值
# 3. 确保 .env 文件在 .gitignore 中，不要提交到版本控制
#

# --------------------------------------------
# 🔐 安全配置 (必需)
# --------------------------------------------

# JWT密钥 - 用于生成和验证用户token
# ⚠️ 生产环境必须设置！建议使用至少32位的随机字符串
# 生成方法: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# 管理员账号配置
# ⚠️ 首次启动时会使用这些凭据创建超级管理员
# 如果不设置，系统会生成随机密码（建议生产环境手动设置）
ADMIN_EMAIL=admin@platform.com
ADMIN_PASSWORD=change-this-secure-password
ADMIN_NAME=超级管理员

# --------------------------------------------
# 🌐 CORS跨域配置
# --------------------------------------------

# 允许的来源列表（逗号分隔）
# 生产环境必须明确指定允许的域名，开发环境可以使用 * 或留空
# 示例: https://example.com,https://app.example.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# JWT令牌配置
# 访问令牌有效期（建议1-4小时）
JWT_ACCESS_EXPIRY=2h
# 刷新令牌有效期（建议7-30天）
JWT_REFRESH_EXPIRY=7d

# --------------------------------------------
# 🚦 速率限制配置
# --------------------------------------------

# 通用API速率限制（每15分钟的最大请求数）
RATE_LIMIT_MAX=100

# 认证API速率限制（每15分钟的最大尝试次数）
AUTH_RATE_LIMIT_MAX=5

# 是否跳过速率限制（仅开发环境）
# SKIP_RATE_LIMIT=true

# --------------------------------------------
# 💾 数据库配置
# --------------------------------------------

# 数据库连接池大小
# 开发环境默认10，生产环境默认50
DB_CONNECTION_LIMIT=50

# --------------------------------------------
# 🔒 登录安全配置
# --------------------------------------------

# 最大登录尝试次数
MAX_LOGIN_ATTEMPTS=5

# 登录失败锁定时长（毫秒，默认15分钟）
LOGIN_LOCK_DURATION=900000

# 登录尝试时间窗口（毫秒，默认15分钟）
LOGIN_ATTEMPT_WINDOW=900000

# --------------------------------------------
# 📋 审计日志配置
# --------------------------------------------

# 审计日志存储目录
AUDIT_LOG_DIR=./logs/audit

# 日志保留天数（默认90天）
AUDIT_LOG_RETENTION_DAYS=90

# 数据库文件路径（可选）
# 默认: server/data/database.sqlite
# 生产环境建议使用绝对路径
# DB_PATH=/var/lib/student-selection/database.sqlite

# 是否启用数据库日志（调试用）
# 默认: false
# DB_LOGGING=true

# --------------------------------------------
# 🚀 服务器配置
# --------------------------------------------

# 运行环境: development | production
NODE_ENV=development

# 服务器端口
PORT=3000

# --------------------------------------------
# 📧 邮件配置 (可选，用于找回密码等功能)
# --------------------------------------------

# SMTP服务器配置
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@yourdomain.com

# --------------------------------------------
# 🎨 其他配置
# --------------------------------------------

# 上传文件大小限制（MB）
# MAX_FILE_SIZE=10

# Session密钥（如果使用session）
# SESSION_SECRET=your-session-secret-key

# 日志级别: debug | info | warn | error
# LOG_LEVEL=info

# --------------------------------------------
# 🔒 生产环境安全检查清单
# --------------------------------------------
# 
# 部署到生产环境前，请确保：
# □ JWT_SECRET 已设置为强随机字符串（至少32位）
# □ ADMIN_PASSWORD 已设置为强密码
# □ ALLOWED_ORIGINS 已限制为实际的域名（不使用 *）
# □ NODE_ENV 设置为 production
# □ DB_PATH 使用绝对路径，且文件权限设置为 600
# □ .env 文件已添加到 .gitignore
# □ 定期备份数据库文件
# □ 启用HTTPS（使用反向代理如Nginx）
# □ 设置防火墙规则
# □ 配置日志监控
#
